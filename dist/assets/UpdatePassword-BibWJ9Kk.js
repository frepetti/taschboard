import{r as t,j as e,L as p,s as d}from"./index-BvDo0rdQ.js";import{C as m}from"./check-circle-mVUCCQYL.js";import{L as g}from"./lock-DTJvx-Oe.js";import{A as j}from"./alert-circle-Da_Orva5.js";import{A as w}from"./arrow-left-D5_T9bTh.js";function L(){const[a,u]=t.useState(""),[n,x]=t.useState(""),[o,i]=t.useState(!1),[c,r]=t.useState(""),[h,b]=t.useState(!1),f=async s=>{if(s.preventDefault(),r(""),a!==n){r("Las contraseñas no coinciden");return}if(a.length<6){r("La contraseña debe tener al menos 6 caracteres");return}i(!0);try{const{error:l}=await d.auth.updateUser({password:a});if(l)throw l;await d.auth.signOut(),sessionStorage.removeItem("recovery_pending"),sessionStorage.removeItem("auth_reset_mode"),b(!0),setTimeout(()=>{window.location.href="/?mode=login"},3e3)}catch(l){r(l.message||"Error al actualizar la contraseña")}finally{i(!1)}};return h?e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-950 via-slate-900 to-slate-950 flex items-center justify-center p-4",children:e.jsxs("div",{className:"bg-slate-900/50 border border-slate-700/50 rounded-xl p-8 max-w-md w-full text-center backdrop-blur-sm",children:[e.jsx("div",{className:"w-16 h-16 rounded-full bg-green-500/20 flex items-center justify-center mx-auto mb-6",children:e.jsx(m,{className:"w-8 h-8 text-green-500"})}),e.jsx("h2",{className:"text-2xl text-white font-bold mb-4",children:"¡Contraseña Actualizada!"}),e.jsx("p",{className:"text-slate-400 mb-6",children:"Tu contraseña ha sido modificada exitosamente. Serás redirigido al inicio de sesión en unos segundos."}),e.jsx("button",{onClick:()=>window.location.href="/",className:"bg-blue-600 hover:bg-blue-500 text-white px-6 py-3 rounded-lg font-medium transition-colors w-full",children:"Ir al Inicio"})]})}):e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-950 via-slate-900 to-slate-950 flex items-center justify-center p-4",children:e.jsxs("div",{className:"max-w-md w-full",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("div",{className:"w-16 h-16 rounded-xl bg-gradient-to-br from-blue-500 to-blue-600 flex items-center justify-center mx-auto mb-4",children:e.jsx(g,{className:"w-8 h-8 text-white"})}),e.jsx("h1",{className:"text-3xl text-white font-bold mb-2",children:"Nueva Contraseña"}),e.jsx("p",{className:"text-slate-400",children:"Ingresa tu nueva contraseña para recuperar el acceso"})]}),e.jsxs("div",{className:"bg-slate-900/50 border border-slate-700/50 rounded-xl p-8 backdrop-blur-sm shadow-xl",children:[c&&e.jsxs("div",{className:"mb-6 p-4 bg-red-500/10 border border-red-500/50 rounded-lg flex items-start gap-3",children:[e.jsx(j,{className:"w-5 h-5 text-red-400 flex-shrink-0 mt-0.5"}),e.jsx("div",{className:"flex-1",children:e.jsx("p",{className:"text-sm text-red-400",children:c})})]}),e.jsxs("form",{onSubmit:f,className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-slate-300 mb-2",children:"Nueva Contraseña"}),e.jsx("input",{type:"password",value:a,onChange:s=>u(s.target.value),placeholder:"••••••••",required:!0,minLength:6,className:"w-full bg-slate-950/50 border border-slate-700 text-white px-4 py-3 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500/50 transition-all"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-slate-300 mb-2",children:"Confirmar Contraseña"}),e.jsx("input",{type:"password",value:n,onChange:s=>x(s.target.value),placeholder:"••••••••",required:!0,minLength:6,className:"w-full bg-slate-950/50 border border-slate-700 text-white px-4 py-3 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500/50 transition-all"})]}),e.jsx("button",{type:"submit",disabled:o,className:"w-full bg-gradient-to-r from-blue-600 to-blue-500 hover:from-blue-500 hover:to-blue-400 disabled:from-slate-700 disabled:to-slate-700 disabled:text-slate-500 text-white px-6 py-3 rounded-lg font-semibold transition-all shadow-lg shadow-blue-500/20 disabled:shadow-none flex items-center justify-center gap-2",children:o?e.jsxs(e.Fragment,{children:[e.jsx(p,{className:"w-5 h-5 animate-spin"}),e.jsx("span",{children:"Actualizando..."})]}):e.jsxs(e.Fragment,{children:[e.jsx(m,{className:"w-5 h-5"}),e.jsx("span",{children:"Actualizar Contraseña"})]})})]}),e.jsx("div",{className:"mt-6 pt-6 border-t border-slate-700/50 text-center",children:e.jsxs("a",{href:"/",className:"text-sm text-slate-400 hover:text-white transition-colors inline-flex items-center gap-2",children:[e.jsx(w,{className:"w-4 h-4"}),e.jsx("span",{children:"Volver al inicio"})]})})]})]})})}export{L as UpdatePassword};
